[gd_scene load_steps=126 format=3 uid="uid://bjjjxnrku30bh"]

[ext_resource type="Texture2D" uid="uid://cy27knyrsv4tp" path="res://assets/sprites/main_character/Main Character (Combo Attack).png" id="1_2v62t"]
[ext_resource type="PackedScene" uid="uid://dbx0cw5vp2n52" path="res://card_projectile.tscn" id="1_qthh5"]
[ext_resource type="Texture2D" uid="uid://c32hmb1idobsh" path="res://assets/sprites/main_character/Main Character (Dash).png" id="2_wcpx6"]
[ext_resource type="Texture2D" uid="uid://6kflqel1lcwi" path="res://assets/sprites/main_character/Main Character (Double Jump).png" id="3_u3evn"]
[ext_resource type="Texture2D" uid="uid://bat2ppmmnxjqj" path="res://assets/sprites/main_character/Main Character (Fall).png" id="4_5q0wt"]
[ext_resource type="Texture2D" uid="uid://ducplm0rr7dpv" path="res://assets/sprites/main_character/Main Character.png" id="5_qthh5"]
[ext_resource type="Texture2D" uid="uid://b716v7x6n18rk" path="res://assets/sprites/main_character/Main Character (Hurt).png" id="5_u3evn"]
[ext_resource type="Texture2D" uid="uid://cc3a8j0vc5nn7" path="res://assets/sprites/main_character/Main Character (Jump).png" id="6_1vudk"]
[ext_resource type="Texture2D" uid="uid://b1be5ush0lv6r" path="res://assets/sprites/main_character/Main Character (Walk).png" id="7_k7f46"]
[ext_resource type="Texture2D" uid="uid://1agkpsopg74k" path="res://assets/sprites/main_character/Main Character (Parry).png" id="7_wcpx6"]
[ext_resource type="Texture2D" uid="uid://map5f2ut1m6d" path="res://assets/sprites/main_character/Main Character (Projectile).png" id="9_5q0wt"]

[sub_resource type="GDScript" id="GDScript_wtcfe"]
script/source = "extends CharacterBody2D

# Movement settings
@export var speed: float = 1000.0
@export var jump_velocity: float = -450.0
@export var gravity: float = 900.0
@export var dash_speed: float = 900.0
@export var dash_duration: float = 0.25
var dash_timer: float = 0.0

# Double jump settings
@export var max_jumps: int = 2
var jump_count: int = 0

# State flags
var is_attacking = false
var is_dashing = false
var is_parrying = false
var is_jumping = false
var is_shooting = false
var facing_dir: int = -1

# Attack settings
var combo_step = 0
var max_combo = 3

# Attack lunge
@export var lunge_force: float = 10.0
@export var lunge_duration: float = 0.1
var lunge_timer: float = 0.0

# Projectile settings
@export var projectile_scene: PackedScene
@onready var spawn_point: Node2D = $SpawnPoint
var projectile_spawned: bool = false

# Timers
@onready var attack_timer: Timer = $StateMachine/AttackTimer
@onready var attack_cooldown_timer: Timer = $StateMachine/AttackCooldownTimer
@onready var attack_combo_timer: Timer = $StateMachine/AttackComboTimer

# Sprite reference
@onready var sprite: AnimatedSprite2D = $AnimatedSprite2D

# Attack hitbox frames (sesuaikan index frame dengan spritesheet-mu)
var attack_hitbox_frames = {
	\"attack_1\": {\"on\": 3, \"off\": 5},
	\"attack_2\": {\"on\": 1, \"off\": 5},
	\"attack_3\": {\"on\": 3, \"off\": 8}
}

# Offsets supaya AttackArea & SpawnPoint bisa diputar sesuai arah
var attack_area_offset: Vector2
var spawn_point_offset: Vector2

func _ready():
	attack_area_offset = $AttackArea/CollisionShape2D.position
	spawn_point_offset = spawn_point.position
	
	sprite.frame_changed.connect(_on_sprite_frame_changed)
	sprite.animation_finished.connect(_on_animation_finished)
	attack_timer.timeout.connect(_on_attack_timer_timeout)
	attack_cooldown_timer.timeout.connect(_on_attack_cooldown_timeout)
	attack_combo_timer.timeout.connect(_on_attack_combo_timeout)

func _physics_process(delta: float) -> void:
	# Parry locks input (gravity still applies)
	if is_parrying:
		if not is_on_floor():
			velocity.y += gravity * delta
		else:
			velocity.y = 0
		velocity.x = 0
		move_and_slide()
		return

	# When shooting: lock movement so animation can finish uninterrupted
	if is_shooting:
		if not is_on_floor():
			velocity.y += gravity * delta
		else:
			velocity.y = 0
		velocity.x = 0
		move_and_slide()
		return

	# Dash state
	if is_dashing:
		dash_timer -= delta
		velocity.y = 0
		velocity.x = facing_dir * dash_speed
		if sprite.animation != \"dash\":
			sprite.play(\"dash\")
		if dash_timer <= 0:
			is_dashing = false
		move_and_slide()
		return

	# Gravity
	if not is_on_floor():
		velocity.y += gravity * delta
		if velocity.y < 0:
			if jump_count == 1 and sprite.animation != \"jump\":
				sprite.play(\"jump\")
			elif jump_count == 2 and sprite.animation != \"doublejump\":
				sprite.play(\"doublejump\")
		else:
			if sprite.animation != \"fall\":
				sprite.play(\"fall\")
	else:
		if is_jumping:
			is_jumping = false
		jump_count = 0

	# Jump
	if Input.is_action_just_pressed(\"jump\") and not is_parrying:
		if jump_count < max_jumps:
			velocity.y = jump_velocity
			jump_count += 1
			is_jumping = true
			if jump_count == 1:
				sprite.play(\"jump\")
			else:
				sprite.play(\"doublejump\")

	# Parry input
	if Input.is_action_just_pressed(\"parry\") and not is_dashing and not is_attacking and not is_parrying and is_on_floor():
		is_parrying = true
		velocity.x = 0
		sprite.play(\"parry\")

	# Attack input
	if Input.is_action_just_pressed(\"attack\") and not is_dashing and not is_parrying and not is_shooting:
		try_attack()

	# Projectile input
	if Input.is_action_just_pressed(\"projectile\") and not is_dashing and not is_parrying and not is_attacking and not is_shooting:
		is_shooting = true
		projectile_spawned = false
		sprite.play(\"projectile\")

	# Movement input
	var dir := 0.0
	if Input.is_action_pressed(\"move_right\"):
		dir += 1.0
	if Input.is_action_pressed(\"move_left\"):
		dir -= 1.0

	# Update facing direction and flip related nodes
	if dir != 0:
		facing_dir = 1 if dir > 0 else -1

	# Dash input (requires a direction)
	if Input.is_action_just_pressed(\"dash\") and not is_dashing and not is_parrying and dir != 0:
		is_dashing = true
		dash_timer = dash_duration
		velocity.x = dir * dash_speed
		velocity.y = 0
		sprite.play(\"dash\")
		return

	# Attack lunge handling
	elif is_attacking:
		if lunge_timer > 0:
			lunge_timer -= delta
			velocity.x = facing_dir * lunge_force
		else:
			velocity.x = 0
	else:
		velocity.x = dir * speed
		if is_on_floor() and not is_attacking and not is_parrying and not is_shooting:
			if dir != 0:
				if sprite.animation != \"walk\":
					sprite.play(\"walk\")
			else:
				if velocity.x == 0 and sprite.animation != \"idle\":
					sprite.play(\"idle\")

	# flip visuals & mirror nodes
	if dir != 0:
		sprite.flip_h = (facing_dir < 0)
		$AttackArea/CollisionShape2D.position.x = attack_area_offset.x * facing_dir
		spawn_point.position.x = spawn_point_offset.x * facing_dir

	move_and_slide()

func try_attack():
	if attack_cooldown_timer.is_stopped():
		if attack_combo_timer.is_stopped():
			combo_step = 0
		combo_step += 1
		if combo_step > max_combo:
			combo_step = 1
		is_attacking = true
		lunge_timer = lunge_duration
		sprite.play(\"attack_%d\" % combo_step)
		attack_timer.start()
		attack_cooldown_timer.start()
		attack_combo_timer.start()

func spawn_projectile():
	if projectile_scene:
		var bullet = projectile_scene.instantiate()
		get_parent().add_child(bullet)  # spawn sebagai sibling di scene
		bullet.global_position = spawn_point.global_position
		
		# kasih arah sesuai player
		bullet.direction = facing_dir

		# flip sprite di projectile langsung (biar ngikut arah)
		if bullet.has_node(\"AnimatedSprite2D\"):
			var spr: AnimatedSprite2D = bullet.get_node(\"AnimatedSprite2D\")
			spr.flip_h = (facing_dir < 0)
			spr.play(\"default\")  # pastikan animasi projectile jalan

func _on_sprite_frame_changed():
	var anim_name = sprite.animation
	# attack hitbox activation
	if anim_name in attack_hitbox_frames:
		var frame_data = attack_hitbox_frames[anim_name]
		if sprite.frame == frame_data[\"on\"]:
			$AttackArea/CollisionShape2D.disabled = false
		elif sprite.frame == frame_data[\"off\"]:
			$AttackArea/CollisionShape2D.disabled = true

	# spawn projectile only once per animation (sesuaikan frame index)
	if anim_name == \"projectile\" and sprite.frame == 4 and not projectile_spawned:
		spawn_projectile()
		projectile_spawned = true

func _on_animation_finished():
	if sprite.animation == \"parry\":
		is_parrying = false
	elif sprite.animation == \"projectile\":
		# sekarang animasi benar-benar selesai â†’ reset shooting
		is_shooting = false
		projectile_spawned = false

func _on_attack_timer_timeout():
	$AttackArea/CollisionShape2D.disabled = true
	is_attacking = false

func _on_attack_cooldown_timeout():
	pass

func _on_attack_combo_timeout():
	combo_step = 0
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kdubu"]
size = Vector2(843.139, 563.824)

[sub_resource type="AtlasTexture" id="AtlasTexture_gt76g"]
atlas = ExtResource("1_2v62t")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_1fr6y"]
atlas = ExtResource("1_2v62t")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_2hxjc"]
atlas = ExtResource("1_2v62t")
region = Rect2(3000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_ebxd8"]
atlas = ExtResource("1_2v62t")
region = Rect2(4500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_2u7jv"]
atlas = ExtResource("1_2v62t")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_24dk6"]
atlas = ExtResource("1_2v62t")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_mryly"]
atlas = ExtResource("1_2v62t")
region = Rect2(3000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_kq1c5"]
atlas = ExtResource("1_2v62t")
region = Rect2(4500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_ornx7"]
atlas = ExtResource("1_2v62t")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_cnnru"]
atlas = ExtResource("1_2v62t")
region = Rect2(1500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_540hr"]
atlas = ExtResource("1_2v62t")
region = Rect2(3000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_6ip5v"]
atlas = ExtResource("1_2v62t")
region = Rect2(4500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_q5dlx"]
atlas = ExtResource("1_2v62t")
region = Rect2(0, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_c4wnb"]
atlas = ExtResource("1_2v62t")
region = Rect2(1500, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_7plk7"]
atlas = ExtResource("1_2v62t")
region = Rect2(3000, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_fbwgr"]
atlas = ExtResource("1_2v62t")
region = Rect2(4500, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_7mj2a"]
atlas = ExtResource("1_2v62t")
region = Rect2(0, 6000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_fshgd"]
atlas = ExtResource("1_2v62t")
region = Rect2(1500, 6000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_wcpx6"]
atlas = ExtResource("2_wcpx6")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_mjyag"]
atlas = ExtResource("2_wcpx6")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_wtyc1"]
atlas = ExtResource("2_wcpx6")
region = Rect2(3000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_wevls"]
atlas = ExtResource("2_wcpx6")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_8013f"]
atlas = ExtResource("2_wcpx6")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_y5ku0"]
atlas = ExtResource("2_wcpx6")
region = Rect2(3000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_lwrfi"]
atlas = ExtResource("2_wcpx6")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_niowr"]
atlas = ExtResource("2_wcpx6")
region = Rect2(1500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_wut41"]
atlas = ExtResource("2_wcpx6")
region = Rect2(3000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_s5efc"]
atlas = ExtResource("2_wcpx6")
region = Rect2(0, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_22e24"]
atlas = ExtResource("3_u3evn")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_m7xe6"]
atlas = ExtResource("3_u3evn")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_kejda"]
atlas = ExtResource("3_u3evn")
region = Rect2(3000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_uqk8q"]
atlas = ExtResource("3_u3evn")
region = Rect2(4500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_6uidu"]
atlas = ExtResource("3_u3evn")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_qu7as"]
atlas = ExtResource("3_u3evn")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_lyuya"]
atlas = ExtResource("3_u3evn")
region = Rect2(3000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_5fipt"]
atlas = ExtResource("3_u3evn")
region = Rect2(4500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_j02gt"]
atlas = ExtResource("3_u3evn")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_thyvg"]
atlas = ExtResource("3_u3evn")
region = Rect2(1500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_nsnm2"]
atlas = ExtResource("3_u3evn")
region = Rect2(3000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_f8kvm"]
atlas = ExtResource("3_u3evn")
region = Rect2(4500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_3hhlv"]
atlas = ExtResource("3_u3evn")
region = Rect2(0, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_4qosj"]
atlas = ExtResource("4_5q0wt")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_cjlbh"]
atlas = ExtResource("4_5q0wt")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_kfelt"]
atlas = ExtResource("4_5q0wt")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_j7y71"]
atlas = ExtResource("5_u3evn")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_gum7p"]
atlas = ExtResource("5_u3evn")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_dt07w"]
atlas = ExtResource("5_u3evn")
region = Rect2(3000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_tiulj"]
atlas = ExtResource("5_u3evn")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_bdwkj"]
atlas = ExtResource("5_u3evn")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_pmoru"]
atlas = ExtResource("5_u3evn")
region = Rect2(3000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_2g5xf"]
atlas = ExtResource("5_u3evn")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_0yo88"]
atlas = ExtResource("5_u3evn")
region = Rect2(1500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_dbwko"]
atlas = ExtResource("5_u3evn")
region = Rect2(3000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_0e48y"]
atlas = ExtResource("5_qthh5")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_epypp"]
atlas = ExtResource("5_qthh5")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_0hol4"]
atlas = ExtResource("5_qthh5")
region = Rect2(3000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_q6r6c"]
atlas = ExtResource("5_qthh5")
region = Rect2(4500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_kdubu"]
atlas = ExtResource("5_qthh5")
region = Rect2(6000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_d21ai"]
atlas = ExtResource("5_qthh5")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_rj586"]
atlas = ExtResource("5_qthh5")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_4d7sh"]
atlas = ExtResource("5_qthh5")
region = Rect2(3000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_ir8iy"]
atlas = ExtResource("5_qthh5")
region = Rect2(4500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_hqns4"]
atlas = ExtResource("5_qthh5")
region = Rect2(6000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_x0ka3"]
atlas = ExtResource("5_qthh5")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_0h7mo"]
atlas = ExtResource("5_qthh5")
region = Rect2(1500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_nr8wp"]
atlas = ExtResource("5_qthh5")
region = Rect2(3000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_d2bti"]
atlas = ExtResource("5_qthh5")
region = Rect2(4500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_ta5nu"]
atlas = ExtResource("5_qthh5")
region = Rect2(6000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_flf07"]
atlas = ExtResource("5_qthh5")
region = Rect2(0, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_k73cj"]
atlas = ExtResource("5_qthh5")
region = Rect2(1500, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_rjqkl"]
atlas = ExtResource("5_qthh5")
region = Rect2(3000, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_fs4d3"]
atlas = ExtResource("5_qthh5")
region = Rect2(4500, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_7vxoj"]
atlas = ExtResource("5_qthh5")
region = Rect2(6000, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_ei405"]
atlas = ExtResource("5_qthh5")
region = Rect2(0, 6000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_e8dv2"]
atlas = ExtResource("5_qthh5")
region = Rect2(1500, 6000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_2nhjh"]
atlas = ExtResource("5_qthh5")
region = Rect2(3000, 6000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_bjha6"]
atlas = ExtResource("5_qthh5")
region = Rect2(4500, 6000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_qilgh"]
atlas = ExtResource("6_1vudk")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_ytlpd"]
atlas = ExtResource("6_1vudk")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_2v765"]
atlas = ExtResource("6_1vudk")
region = Rect2(3000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_b8fb0"]
atlas = ExtResource("6_1vudk")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_ma08v"]
atlas = ExtResource("6_1vudk")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_s32dh"]
atlas = ExtResource("6_1vudk")
region = Rect2(3000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_037st"]
atlas = ExtResource("6_1vudk")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_6orn5"]
atlas = ExtResource("6_1vudk")
region = Rect2(1500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_whnp6"]
atlas = ExtResource("6_1vudk")
region = Rect2(3000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_u3evn"]
atlas = ExtResource("7_wcpx6")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_5q0wt"]
atlas = ExtResource("7_wcpx6")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_qthh5"]
atlas = ExtResource("7_wcpx6")
region = Rect2(3000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_1vudk"]
atlas = ExtResource("7_wcpx6")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_k7f46"]
atlas = ExtResource("7_wcpx6")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_47qjj"]
atlas = ExtResource("7_wcpx6")
region = Rect2(3000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_dypn8"]
atlas = ExtResource("7_wcpx6")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_07ek2"]
atlas = ExtResource("7_wcpx6")
region = Rect2(1500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_kg3iu"]
atlas = ExtResource("7_wcpx6")
region = Rect2(3000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_ei42f"]
atlas = ExtResource("9_5q0wt")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_auo7h"]
atlas = ExtResource("9_5q0wt")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_y53ib"]
atlas = ExtResource("9_5q0wt")
region = Rect2(3000, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_3dsai"]
atlas = ExtResource("9_5q0wt")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_5r414"]
atlas = ExtResource("9_5q0wt")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_xrkwf"]
atlas = ExtResource("9_5q0wt")
region = Rect2(3000, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_xcfv5"]
atlas = ExtResource("9_5q0wt")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_dnrud"]
atlas = ExtResource("9_5q0wt")
region = Rect2(1500, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_i5kf0"]
atlas = ExtResource("9_5q0wt")
region = Rect2(3000, 3000, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_tm7pc"]
atlas = ExtResource("9_5q0wt")
region = Rect2(0, 4500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_lbrxf"]
atlas = ExtResource("7_k7f46")
region = Rect2(0, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_xjt7e"]
atlas = ExtResource("7_k7f46")
region = Rect2(1500, 0, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_0xo8l"]
atlas = ExtResource("7_k7f46")
region = Rect2(0, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_xfyss"]
atlas = ExtResource("7_k7f46")
region = Rect2(1500, 1500, 1500, 1500)

[sub_resource type="AtlasTexture" id="AtlasTexture_3ngjr"]
atlas = ExtResource("7_k7f46")
region = Rect2(0, 3000, 1500, 1500)

[sub_resource type="SpriteFrames" id="SpriteFrames_gt76g"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_gt76g")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gt76g")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1fr6y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1fr6y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2hxjc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ebxd8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2u7jv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_24dk6")
}],
"loop": true,
"name": &"attack_1",
"speed": 16.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mryly")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kq1c5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ornx7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cnnru")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_540hr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6ip5v")
}],
"loop": true,
"name": &"attack_2",
"speed": 16.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_q5dlx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c4wnb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7plk7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fbwgr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7mj2a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7mj2a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7mj2a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fshgd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fshgd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fshgd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fshgd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fshgd")
}],
"loop": true,
"name": &"attack_3",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wcpx6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mjyag")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wtyc1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wevls")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8013f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y5ku0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lwrfi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_niowr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wut41")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s5efc")
}],
"loop": false,
"name": &"dash",
"speed": 16.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_22e24")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m7xe6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kejda")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uqk8q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6uidu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qu7as")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lyuya")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5fipt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j02gt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_thyvg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nsnm2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f8kvm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3hhlv")
}],
"loop": true,
"name": &"doublejump",
"speed": 36.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4qosj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cjlbh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kfelt")
}],
"loop": true,
"name": &"fall",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_j7y71")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gum7p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dt07w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tiulj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bdwkj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pmoru")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2g5xf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0yo88")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dbwko")
}],
"loop": true,
"name": &"hurt",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0e48y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_epypp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0hol4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q6r6c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kdubu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d21ai")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rj586")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4d7sh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ir8iy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hqns4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x0ka3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0h7mo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nr8wp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d2bti")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ta5nu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_flf07")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k73cj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rjqkl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fs4d3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7vxoj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ei405")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e8dv2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2nhjh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bjha6")
}],
"loop": true,
"name": &"idle",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_qilgh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ytlpd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2v765")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b8fb0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ma08v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s32dh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_037st")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6orn5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_whnp6")
}],
"loop": true,
"name": &"jump",
"speed": 14.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_u3evn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5q0wt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qthh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1vudk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k7f46")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_47qjj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dypn8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_07ek2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kg3iu")
}],
"loop": false,
"name": &"parry",
"speed": 16.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ei42f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_auo7h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y53ib")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3dsai")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5r414")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xrkwf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xcfv5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnrud")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i5kf0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tm7pc")
}],
"loop": false,
"name": &"projectile",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lbrxf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xjt7e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0xo8l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xfyss")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3ngjr")
}],
"loop": true,
"name": &"walk",
"speed": 8.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1fr6y"]
size = Vector2(571.429, 1763.86)

[node name="main_character" type="CharacterBody2D" groups=["player"]]
scale = Vector2(-1.5, 1.5)
script = SubResource("GDScript_wtcfe")
speed = 500.0
dash_speed = 500.0
projectile_scene = ExtResource("1_qthh5")

[node name="StateMachine" type="Node2D" parent="."]
position = Vector2(2, 14)

[node name="AttackTimer" type="Timer" parent="StateMachine"]
wait_time = 0.4
one_shot = true

[node name="AttackCooldownTimer" type="Timer" parent="StateMachine"]
wait_time = 0.3
one_shot = true

[node name="AttackComboTimer" type="Timer" parent="StateMachine"]
wait_time = 2.0

[node name="AttackArea" type="Area2D" parent="." groups=["sword"]]
position = Vector2(31, -17)
scale = Vector2(0.051, 0.051)

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackArea"]
position = Vector2(-343.137, 274.51)
scale = Vector2(-1, -1)
shape = SubResource("RectangleShape2D_kdubu")
disabled = true

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(31, -17)
scale = Vector2(0.051, 0.051)
sprite_frames = SubResource("SpriteFrames_gt76g")
animation = &"doublejump"
autoplay = "idle"
frame_progress = 0.81241

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(35, -5)
scale = Vector2(0.021, 0.021)
shape = SubResource("RectangleShape2D_1fr6y")

[node name="SpawnPoint" type="Node2D" parent="."]
position = Vector2(33.3333, 6.66667)
